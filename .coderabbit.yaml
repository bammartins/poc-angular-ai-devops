language: "pt-BR"

reviews:
  profile: "assertive"
  high_level_summary: true
  request_changes_workflow: true
  auto_assign_reviewers: true
  issue_enrichment:
    auto_enrich:
      enabled: true
  high_level_summary_instructions: >-
    SUMMARY REQUIREMENT (MANDATORY):
    At the top of your review, include a structured PR change summary that describes what the developer is sending.

    Use EXACTLY this format and headings:

    ## PR Change Summary (Structured)
    ### Added
    - <bullet list of newly added files/modules/features>

    ### Changed
    - <bullet list of modified files/modules/features and what changed>

    ### Removed
    - <bullet list of removed files/modules/features>

    ### Tests Impact
    - Test files added/changed: <list paths or "none">
    - Main gaps / missing coverage: <1-5 bullets>

    Rules:
    - Be specific and file-oriented (mention file paths when possible).
    - Do not write a generic paragraph; always use the sections above.
    - If a section has no items, write "None".
    - Keep each bullet concise (one line) and action-oriented.

  path_instructions:
    - path: "**/*.spec.ts"
      instructions: >
        PRIMARY GOAL: TEST REVIEW.
        You MUST produce a clearly structured review, NOT a single generic paragraph.

        REQUIRED OUTPUT FORMAT (use Markdown headings exactly like this):
        ## Resumo (sempre)
        - (3 to 7 bullets)

        ## Revisão por arquivo (obrigatório)
        For EACH changed *.spec.ts file, add a subsection with the exact file path:
        ### Arquivo: <path>
        - Findings (specific to this file)
        - Missing assertions / weak asserts
        - Missing error-path tests
        - Edge cases not covered
        - Flakiness risks (async/fakeAsync/tick/flush), test isolation issues
        - Mocking issues (overly permissive spies, unrealistic fixtures)

        ## Test Gaps (obrigatório)
        List missing test cases as bullets in the format:
        - <path>: <scenario> — <hint how to implement>

        IMPORTANT:
        - Prefer concrete, actionable suggestions over general advice.
        - If there are no test files changed, explicitly say so and list which tests should be added.

    - path: "**/*.ts"
      instructions: >
        If production code changes are not accompanied by test changes,
        explicitly call it out under "Test Gaps" and name the target *.spec.ts files + scenarios.
        Keep production-code commentary secondary to test coverage and test quality.